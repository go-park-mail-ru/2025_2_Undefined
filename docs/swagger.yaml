basePath: /api/v1
definitions:
  dto.ChatCreateInformationDTO:
    properties:
      members:
        items:
          $ref: '#/definitions/dto.UserInfoChatDTO'
        type: array
      name:
        type: string
      type:
        description: Тип чата - канал, диалог или группа
        type: string
    type: object
  dto.ChatDetailedInformationDTO:
    properties:
      can_chat:
        type: boolean
      id:
        format: uuid
        type: string
      is_admin:
        type: boolean
      is_member:
        type: boolean
      is_private:
        type: boolean
      members:
        items:
          $ref: '#/definitions/dto.UserInfoChatDTO'
        type: array
      messages:
        items:
          type: object
        type: array
      name:
        type: string
      type:
        type: string
    type: object
  dto.ChatViewInformationDTO:
    properties:
      id:
        format: uuid
        type: string
      last_message:
        type: object
      name:
        type: string
      type:
        type: string
    type: object
  dto.ErrorDTO:
    properties:
      message:
        type: string
    type: object
  dto.IdDTO:
    properties:
      id:
        format: uuid
        type: string
    type: object
  dto.LoginRequest:
    properties:
      password:
        type: string
      phone_number:
        type: string
    required:
    - password
    - phone_number
    type: object
  dto.PostContactDTO:
    properties:
      contact_id:
        type: string
    type: object
  dto.RegisterRequest:
    properties:
      name:
        type: string
      password:
        minLength: 6
        type: string
      phone_number:
        type: string
    required:
    - name
    - password
    - phone_number
    type: object
  dto.UserInfoChatDTO:
    properties:
      role:
        description: Роль пользователя в чате - админ(писать и добавлять участников),
          участник(писать), зритель (только просмотр)
        type: string
      user_avatar:
        type: string
      user_id:
        format: uuid
        type: string
      user_name:
        type: string
    type: object
  dto.ValidationErrorDTO:
    properties:
      field:
        type: string
      message:
        type: string
    type: object
  dto.ValidationErrorsDTO:
    properties:
      errors:
        items:
          $ref: '#/definitions/dto.ValidationErrorDTO'
        type: array
      message:
        type: string
    type: object
  models.User:
    properties:
      account_type:
        type: string
      avatar:
        type: string
      bio:
        type: string
      created_at:
        type: string
      id:
        format: uuid
        type: string
      name:
        type: string
      phone_number:
        type: string
      updated_at:
        type: string
      username:
        type: string
    type: object
  session.Session:
    properties:
      created_at:
        type: string
      device:
        type: string
      id:
        type: string
      last_seen:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    name: Undefined Team
    url: https://github.com/go-park-mail-ru/2025_2_Undefined
  description: API сервер для чат-приложения в стиле Telegram. Позволяет регистрировать
    пользователей, управлять чатами и обмениваться сообщениями.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: Undefined team API documentation of project Telegram
  version: "1.0"
paths:
  /chats:
    get:
      consumes:
      - application/json
      description: Возвращает список всех чатов текущего пользователя с информацией
        о последнем сообщении
      produces:
      - application/json
      responses:
        "200":
          description: Список чатов
          schema:
            items:
              $ref: '#/definitions/dto.ChatViewInformationDTO'
            type: array
        "400":
          description: Некорректный запрос
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
        "401":
          description: Неавторизованный доступ
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
      security:
      - ApiKeyAuth: []
      summary: Получить список чатов
      tags:
      - chats
    post:
      consumes:
      - application/json
      description: Создает новый чат с указанными участниками и настройками
      parameters:
      - description: Данные для создания чата
        in: body
        name: chat
        required: true
        schema:
          $ref: '#/definitions/dto.ChatCreateInformationDTO'
      produces:
      - application/json
      responses:
        "201":
          description: ID созданного чата
          schema:
            $ref: '#/definitions/dto.IdDTO'
        "400":
          description: Некорректный запрос
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
        "401":
          description: Неавторизованный доступ
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
      security:
      - ApiKeyAuth: []
      summary: Создать новый чат
      tags:
      - chats
  /chats/{chatId}:
    get:
      consumes:
      - application/json
      description: Возвращает детальную информацию о конкретном чате, включая сообщения
        и участников
      parameters:
      - description: ID чата
        format: uuid
        in: path
        name: chatId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Детальная информация о чате
          schema:
            $ref: '#/definitions/dto.ChatDetailedInformationDTO'
        "400":
          description: Некорректный запрос
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
        "401":
          description: Неавторизованный доступ
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
      security:
      - ApiKeyAuth: []
      summary: Получить информацию о чате
      tags:
      - chats
  /contacts:
    get:
      consumes:
      - application/json
      description: Возвращает список всех контактов текущего пользователя с полной
        информацией о пользователях
      produces:
      - application/json
      responses:
        "200":
          description: Список контактов успешно получен
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Неавторизованный доступ
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Внутренняя ошибка сервера
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Получение списка контактов
      tags:
      - contacts
    post:
      consumes:
      - application/json
      description: Добавляет нового пользователя в список контактов текущего пользователя
      parameters:
      - description: Данные контакта для добавления
        in: body
        name: contact
        required: true
        schema:
          $ref: '#/definitions/dto.PostContactDTO'
      produces:
      - application/json
      responses:
        "201":
          description: Контакт успешно добавлен
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Неверные данные запроса
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Неавторизованный доступ
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Внутренняя ошибка сервера
          schema:
            additionalProperties: true
            type: object
      security:
      - ApiKeyAuth: []
      summary: Добавление контакта
      tags:
      - contacts
  /login:
    post:
      consumes:
      - application/json
      description: Аутентифицирует пользователя по номеру телефона и паролю, создает
        сессию
      parameters:
      - description: Креденшиалы для входа
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/dto.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Вход выполнен успешно
        "400":
          description: Ошибки валидации
          schema:
            $ref: '#/definitions/dto.ValidationErrorsDTO'
        "401":
          description: Неверные креденшиалы
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
      summary: Аутентификация пользователя
      tags:
      - auth
  /logout:
    post:
      consumes:
      - application/json
      description: Аннулирует текущую сессию и удаляет cookie
      produces:
      - application/json
      responses:
        "200":
          description: Logout successful
        "401":
          description: Неавторизованный доступ
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
      security:
      - ApiKeyAuth: []
      summary: Выход из системы
      tags:
      - auth
  /me:
    get:
      consumes:
      - application/json
      description: Возвращает полные данные о текущем авторизованном пользователе
      produces:
      - application/json
      responses:
        "200":
          description: Информация о пользователе
          schema:
            $ref: '#/definitions/models.User'
        "401":
          description: Неавторизованный доступ
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
      security:
      - ApiKeyAuth: []
      summary: Получить информацию о текущем пользователе
      tags:
      - user
  /register:
    post:
      consumes:
      - application/json
      description: Регистрирует нового пользователя в системе и создает сессию
      parameters:
      - description: Данные для регистрации
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Пользователь успешно зарегистрирован
        "400":
          description: Ошибки валидации
          schema:
            $ref: '#/definitions/dto.ValidationErrorsDTO'
      summary: Регистрация пользователя
      tags:
      - auth
  /sessions:
    get:
      consumes:
      - application/json
      description: Возвращает все активные сессии текущего авторизованного пользователя
      produces:
      - application/json
      responses:
        "200":
          description: Список сессий пользователя
          schema:
            items:
              $ref: '#/definitions/session.Session'
            type: array
        "401":
          description: Неавторизованный доступ
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
        "500":
          description: Внутренняя ошибка сервера
          schema:
            $ref: '#/definitions/dto.ErrorDTO'
      security:
      - ApiKeyAuth: []
      summary: Получить список сессий пользователя
      tags:
      - user
swagger: "2.0"
